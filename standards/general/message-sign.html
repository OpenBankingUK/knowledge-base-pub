<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Message Signing FAQs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link,[object Object] 0="link" 1="[object Object]"></link,[object Object]>
    <meta name="description" content="OBIE Knowledge Base">
    
    <link rel="preload" href="/knowledge-base-pub/assets/css/0.styles.e12b10e4.css" as="style"><link rel="preload" href="/knowledge-base-pub/assets/js/app.c91854fd.js" as="script"><link rel="preload" href="/knowledge-base-pub/assets/js/2.c4d95c86.js" as="script"><link rel="preload" href="/knowledge-base-pub/assets/js/17.dde35632.js" as="script"><link rel="prefetch" href="/knowledge-base-pub/assets/js/10.ac03dcf7.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/11.f2602d81.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/12.91215f8a.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/13.88e9c13e.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/14.936d442d.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/15.bee83e34.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/16.5de3d08d.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/18.2f8e17cb.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/19.4dfc891a.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/20.38388620.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/21.1e99625c.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/22.244793f3.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/3.68e388e2.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/4.47d24b2c.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/5.af129213.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/6.32ebf877.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/7.7575f791.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/8.1e517781.js"><link rel="prefetch" href="/knowledge-base-pub/assets/js/9.844979ba.js">
    <link rel="stylesheet" href="/knowledge-base-pub/assets/css/0.styles.e12b10e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="socket"><div class="container"><div class="search-button"><svg width="14px" height="14px" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>icon_search</title> <g id="🎨-Design" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="T#4---Generic-Content" transform="translate(-1254.000000, -11.000000)" fill="currentColor" fill-rule="nonzero" stroke="currentColor" stroke-width="0.4"><g id="Secondary-Nav"><path d="M1263.76363,19.8996461 L1266.82154,22.9581266 C1267.05943,23.1960632 1267.06021,23.5810599 1266.81955,23.8217632 C1266.58056,24.0608 1266.18963,24.0573595 1265.95607,23.8237552 L1262.89817,20.7652747 C1260.97752,22.2603077 1258.19934,22.1249657 1256.43395,20.3592489 C1254.52202,18.4469551 1254.52202,15.3465142 1256.43395,13.4342204 C1258.34589,11.5219265 1261.44575,11.5219265 1263.35768,13.4342204 C1265.12307,15.1999372 1265.25838,17.9786391 1263.76363,19.8996461 L1263.76363,19.8996461 Z M1262.49222,19.4936204 C1263.92617,18.0594 1263.92617,15.7340693 1262.49222,14.2998489 C1261.05826,12.8656286 1258.73337,12.8656286 1257.29942,14.2998489 C1255.86547,15.7340693 1255.86547,18.0594 1257.29942,19.4936204 C1258.73337,20.9278407 1261.05826,20.9278407 1262.49222,19.4936204 Z" id="icon_search"></path></g></g></g></svg> <span>Search</span></div></div></div> <div class="navbar-wrapper container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge-base-pub/" class="home-link router-link-active"><img src="/knowledge-base-pub/assets/img/open-banking-logo.svg" alt="" class="logo"> <!----></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="https://standards.openbanking.org.uk/api-specifications/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Specifications
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/security-profiles/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security Profiles
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/customer-experience-guidelines/introduction/section-a/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Customer Experience Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/operational-guidelines/introduction/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Operational Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/other-guidelines/introduction/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/document-library/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reference Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://openbankinguk.github.io/knowledge-base-pub/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FAQs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></div> <div class="search-wrapper"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://standards.openbanking.org.uk/api-specifications/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Specifications
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/security-profiles/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security Profiles
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/customer-experience-guidelines/introduction/section-a/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Customer Experience Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/operational-guidelines/introduction/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Operational Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/other-guidelines/introduction/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Other Guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://standards.openbanking.org.uk/document-library/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reference Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://openbankinguk.github.io/knowledge-base-pub/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FAQs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/knowledge-base-pub/conformance-tools/" class="sidebar-heading clickable"><span>Conformance Tool</span> <span class="chevron down"><svg width="8px" height="14px" viewBox="0 0 8 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ico_chevron</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-788.000000, -1329.000000)" fill="currentColor" fill-rule="nonzero"><polygon transform="translate(792.000000, 1336.000000) rotate(-90.000000) translate(-792.000000, -1336.000000)" points="798.5 1333.45455 792 1340 785.5 1333.45455 786.944444 1332 792 1337.09091 797.055556 1332"></polygon></g></g></svg></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/knowledge-base-pub/standards/" class="sidebar-heading clickable router-link-active open"><span>Standards</span> <span class="chevron up"><svg width="8px" height="14px" viewBox="0 0 8 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ico_chevron</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-788.000000, -1329.000000)" fill="currentColor" fill-rule="nonzero"><polygon transform="translate(792.000000, 1336.000000) rotate(-90.000000) translate(-792.000000, -1336.000000)" points="798.5 1333.45455 792 1340 785.5 1333.45455 786.944444 1332 792 1337.09091 797.055556 1332"></polygon></g></g></svg></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge-base-pub/standards/open-data.html" class="sidebar-link">Open Data API Specifications</a></li><li><a href="/knowledge-base-pub/standards/read-write.html" class="sidebar-link">Read Write Data Specification</a></li><li><a href="/knowledge-base-pub/standards/ceg.html" class="sidebar-link">Customer Experience Guidelines</a></li><li><a href="/knowledge-base-pub/standards/og.html" class="sidebar-link">Operational Guidelines</a></li><li><a href="/knowledge-base-pub/standards/dcr.html" class="sidebar-link">Dynamic Client Registration</a></li><li><a href="/knowledge-base-pub/standards/mi.html" class="sidebar-link">MI reporting</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/knowledge-base-pub/standards/general/" class="sidebar-heading clickable router-link-active open"><span>General</span> <span class="chevron up"><svg width="8px" height="14px" viewBox="0 0 8 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ico_chevron</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-788.000000, -1329.000000)" fill="currentColor" fill-rule="nonzero"><polygon transform="translate(792.000000, 1336.000000) rotate(-90.000000) translate(-792.000000, -1336.000000)" points="798.5 1333.45455 792 1340 785.5 1333.45455 786.944444 1332 792 1337.09091 797.055556 1332"></polygon></g></g></svg></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge-base-pub/standards/general/90days.html" class="sidebar-link">New SCA (Art 10A and Art 36(6) changes</a></li><li><a href="/knowledge-base-pub/standards/general/company-name.html" class="sidebar-link">Company Name</a></li><li><a href="/knowledge-base-pub/standards/general/message-sign.html" aria-current="page" class="active sidebar-link">Message Signing</a></li><li><a href="/knowledge-base-pub/standards/general/vrp.html" class="sidebar-link">Variable Recurring Payment</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="message-signing-faqs"><a href="#message-signing-faqs" class="header-anchor">#</a> Message Signing FAQs</h2> <p></p><div class="table-of-contents"><ul><li><a href="#message-signing-faqs">Message Signing FAQs</a><ul><li><a href="#are-there-different-versions-for-message-signing-as-a-tpp-which-version-should-i-be-using">Are there different versions for message signing? As a TPP, which version should I be using?</a></li><li><a href="#what-are-the-key-differences-between-each-of-these-versions">What are the key differences between each of these versions?</a></li><li><a href="#what-should-be-the-iss-when-using-an-eidas-certificate">What should be the `iss` when using an EIDAS certificate?</a></li><li><a href="#what-is-the-tan-value-for-directory-sandbox">What is the `tan` value for Directory Sandbox?</a></li><li><a href="#which-api-requests-and-responses-should-be-signed">Which API requests and responses should be signed?</a></li><li><a href="#when-signing-an-http-payload-should-the-input-be-the-raw-http-payload-or-a-parsed-and-cleansed-json-object">When signing an HTTP payload, should the input be the “raw” HTTP payload or a parsed and cleansed JSON object?</a></li><li><a href="#can-you-explain-what-are-the-supported-values-of-b64-claim-for-different-versions-of-specifications">Can you explain what are the supported values of `b64` claim for different versions of specifications?</a></li><li><a href="#are-aspsps-expected-to-also-support-b64-un-encoded-signed-messages-for-version-3-1-4-onwards">Are ASPSPs expected to also support `b64` un-encoded &amp; signed messages for version 3.1.4 onwards?</a></li></ul></li></ul></div><p></p> <h3 id="are-there-different-versions-for-message-signing-as-a-tpp-which-version-should-i-be-using"><a href="#are-there-different-versions-for-message-signing-as-a-tpp-which-version-should-i-be-using" class="header-anchor">#</a> <strong>Are there different versions for message signing? As a TPP, which version should I be using?</strong></h3> <p>There are primarily three versions of message signing in the OBIE specifications:</p> <p>Read-Write API Specifications 3.0
Read-Write API Specifications 3.1.3
Read-Write API Specification 3.1.4+</p> <p>The version that is to be used is determined by the Read-Write API profile version that is supported by the ASPSP. The information can be found on ASPSP’s developer portal and possibly on the <a href="
https://openbanking.atlassian.net/wiki/spaces/AD/pages/1135346433/Transparency+Calendar
" rel="nofollow" class="external-link">transparency calendar</a>.</p> <p>Note: The rest of this FAQ covers Version 3.1.x only. Version 3.0 signatures are no longer supported by OBIE.</p> <h3 id="what-are-the-key-differences-between-each-of-these-versions"><a href="#what-are-the-key-differences-between-each-of-these-versions" class="header-anchor">#</a> <strong>What are the key differences between each of these versions?</strong></h3> <p>Please refer to the specifications for how the message signatures are to be constructed and verified.</p> <p>The main difference between signatures in Version 3.0 and 3.1.x is that Version 3.1.x signatures are not tightly coupled with the <code>subject</code> of the signing certificate. Certificates can be generated using simple asymmetric key pairs. The 3.1.x specification introduces a new <code>tan</code> claim to identify the trust anchor. The trust anchor is the entity responsible for providing access to the public keys required to verify signatures.</p> <p>Between Version 3.1.3 and later versions, the key point of divergence is the removal of the <code>b64</code> claim. Participants using Version 3.1.3 or earlier must support and process correctly signatures that are set to have <code>b64</code> as false. <code>b64</code>=false indicates that the detached payload is not base64 encoded when calculating the signature.</p> <h3 id="what-should-be-the-iss-when-using-an-eidas-certificate"><a href="#what-should-be-the-iss-when-using-an-eidas-certificate" class="header-anchor">#</a> <strong>What should be the <code>iss</code> when using an EIDAS certificate?</strong></h3> <p>The structure of the <code>iss</code> field is defined by the trust anchor.</p> <ol><li>If the certificate is lodged with the Open Banking Directory and Open Banking Directory is the trust anchor (as indicated by the tan value equal to <code>openbanking.org.uk</code>)</li></ol> <p>a. When issued by a TPP, <code>iss</code> has the form <code>NaN/NaN</code>,</p> <p>b. When issued by an ASPSP, <code>iss</code> has the form <code>NaN</code></p> <ol start="2"><li><p>If the certificate is lodged with another trust anchor, the trust anchor should specify the expected iss values that would identify the issuer of the signature.</p></li> <li><p>If the certificate is not lodged with a trust anchor, then the subject of the certificate should be used as the <code>iss</code></p></li></ol> <p>The specification does not state how a signature of the last type should be verified by the ASPSP. The ASPSP may have additional requirements for ensuring that the public key is securely transmitted and for the durability of the key.</p> <p>When a TPP EIDAS certificate is lodged with the Open Banking Directory and Open Banking Directory is the trust anchor, <code>iss</code> has the form <span><code>{{orgi-id}}/{{software-statement-id}}</code></span>.</p> <p>When an ASPSP EIDAS certificate is lodged with the Open Banking Directory and Open Banking Directory is the trust anchor, <code>iss</code> has the form <span><code>{{orgi-id}}</code></span>.</p> <h3 id="what-is-the-tan-value-for-directory-sandbox"><a href="#what-is-the-tan-value-for-directory-sandbox" class="header-anchor">#</a> <strong>What is the <code>tan</code> value for Directory Sandbox?</strong></h3> <p>The specification does not define the expected <code>tan</code> value to be used by ASPSP’s (testing facilities) that use the Directory Sandbox.</p> <p>Each ASPSP is free to define what <code>tan</code> values would be accepted by their sandboxes.</p> <h3 id="which-api-requests-and-responses-should-be-signed"><a href="#which-api-requests-and-responses-should-be-signed" class="header-anchor">#</a> <strong>Which API requests and responses should be signed?</strong></h3> <p>The specification is clear about which API requests and responses require signatures:</p> <p>The <code>Endpoints</code> table for resource documentation has a column called “Message Signing”. The column specifies whether the API has “signed requests”, “signed response” or both.</p> <p>The swagger specification indicates which requests and responses would have signatures through the presence of the <code>x-jws-signature</code></p> <h3 id="when-signing-an-http-payload-should-the-input-be-the-raw-http-payload-or-a-parsed-and-cleansed-json-object"><a href="#when-signing-an-http-payload-should-the-input-be-the-raw-http-payload-or-a-parsed-and-cleansed-json-object" class="header-anchor">#</a> <strong>When signing an HTTP payload, should the input be the “raw” HTTP payload or a parsed and cleansed JSON object?</strong></h3> <p>Signature generation and validation should always be based on the raw sequence of bytes that constitute the HTTP body (prior to the application of HTTP transformations such as multi-part encoding, gzip/deflate etc.)</p> <p>Some further notes:</p> <ul><li><p>The only consistent payload that is available to the sender and receiver is the byte representation of the HTTP body.</p></li> <li><p>Using payloads at the JSON level would expose the sign/verify method to the vagaries of a JSON parser - this would make it impossible to cater to every permutation that could occur in the ecosystem.</p></li> <li><p>The standard does not specifically talk about signatures on JSON bodies - it talks about signatures on any content-type as indicated by <code>cty</code>. This would further add to the interpretation that this needs to be the raw HTTP body.</p></li> <li><p>Although we state “raw body” here, it leaves things to further interpretation around how HTTP handles the body part. The body can be gzip/deflate encoded and it could also be multi-part encoded. However, this encoding would take place at the HTTP level once the sender starts transmitting the message. Since this is likely to take place after the signature has been generated, we should not be thinking about this “raw” level of the body, but the byte representation of the body once the HTTP mechanisms have been accounted for.</p></li></ul> <h3 id="can-you-explain-what-are-the-supported-values-of-b64-claim-for-different-versions-of-specifications"><a href="#can-you-explain-what-are-the-supported-values-of-b64-claim-for-different-versions-of-specifications" class="header-anchor">#</a> <strong>Can you explain what are the supported values of <code>b64</code> claim for different versions of specifications?</strong></h3> <p><code>b64</code> claim is removed from Version 3.1.4 onwards which means,</p> <p><strong>For version v3.0 to 3.1.3, the value of <code>b64</code> claim needs to be false.</strong> ASPSP must support the parameter b64 to be false, and any TPPs using these ASPSPs must do the same.</p> <p>Eg:</p> <p>A detached signature, <code>b64</code>=false</p> <blockquote><p><code>b64Encode(header)</code><br>
.<br>
.<br> <code>sign( concatenate( b64UrlEncode(header), &quot;.&quot;, payload ) )</code><br></p></blockquote> <p>A non-detached signature, <code>b64</code>=false would be encoded as follows. (This is for completeness only - the specification does not require the use of this format)</p> <blockquote><p><code>b64Encode(header)</code><br>
.<br> <code>payload</code><br>
.<br> <code>sign( concatenate( b64UrlEncode(header), &quot;.&quot;, payload ))</code><br></p></blockquote> <p><strong>For version 3.1.4 onward, ASPSPs must not include the <code>b64</code> claim in the header</strong>, and any TPPs using these ASPSPs must do the same.</p> <p>Eg:</p> <p>A Detached signature, <code>b64</code>=true (or not specified)</p> <blockquote><p><code>b64Encode(header)</code><br>
.<br>
.<br> <code>sign( concatenate( b64UrlEncode(header), &quot;.&quot;, b64UrlEncode(payload) ) )</code><br></p></blockquote> <p>A non-detached signature, <code>b64</code>=true</p> <blockquote><p><code>b64Encode(header)</code><br>
.<br> <code>b64UrlEncode(payload)</code><br>
.<br> <code>sign( concatenate( b64UrlEncode(header), &quot;.&quot;, b64UrlEncode(payload) ) )</code><br></p></blockquote> <p>Note: ASPSPs must include details of which version they support in their API documentation and must give TPPs at least three month's notice of any changes.</p> <h3 id="are-aspsps-expected-to-also-support-b64-un-encoded-signed-messages-for-version-3-1-4-onwards"><a href="#are-aspsps-expected-to-also-support-b64-un-encoded-signed-messages-for-version-3-1-4-onwards" class="header-anchor">#</a> <strong>Are ASPSPs expected to also support <code>b64</code> un-encoded &amp; signed messages for version 3.1.4 onwards?</strong></h3> <p>No, ASPSP may reject messages with a <code>b64</code> claim in the JOSE header.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge-base-pub/standards/general/company-name.html" class="prev">Company Name</a></span> <span class="next"><a href="/knowledge-base-pub/standards/general/vrp.html">Variable Recurring Payment</a>→
    </span></p></div> </main> <footer role="contentinfo" id="footer" class="footer g02"><div class="container"><div class="g02__top-wrap"><button class="g02__top"><a href="#app" class="g02__top-icon"><svg width="8px" height="14px" viewBox="0 0 8 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ico_chevron</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-788.000000, -1329.000000)" fill="#00A5B7" fill-rule="nonzero"><polygon transform="translate(792.000000, 1336.000000) rotate(-90.000000) translate(-792.000000, -1336.000000)" points="798.5 1333.45455 792 1340 785.5 1333.45455 786.944444 1332 792 1337.09091 797.055556 1332"></polygon></g></g></svg></a> <span class="g02__top-text">Back to Top</span></button></div> <div class="g02__grid"><div class="g02__grid-text"><div class="g02__info"><a href="https://standards.openbanking.org.uk" target="_blank" class="g02__logo"><img src="https://standards.openbanking.org.uk/wp-content/uploads/2022/03/open-banking-footer-logo.png" alt width="567" height="57" class="g02__logo-image"></a> <p>
            © Copyright Open Banking Limited 2022.
            <br><br>
            Unless otherwise stated, all specifications, documentation, articles, and downloadable reference applications are subject to the MIT Licence.
            <br><br>
            Registered in England. Company Number: 10440081
            <br><br>
            Registered office: 8th Floor, 100 Bishopsgate, London EC2N 4AG United Kingdom
          </p></div> <div class="g02__social"><a href="https://www.facebook.com/UKOpenBanking/" target="_blank" title="facebook" class="g02__social-link g02__social-link--facebook"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a> <a href="https://twitter.com/UKOpenBanking" target="_blank" title="twitter" class="g02__social-link g02__social-link--twitter"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a> <a href="https://www.linkedin.com/company/openbanking" target="_blank" title="linkedin" class="g02__social-link g02__social-link--linkedin"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a> <a href="https://www.youtube.com/channel/UCT9erGA7eYRU-kkG-HA1MQQ" target="_blank" title="youtube" class="g02__social-link g02__social-link--youtube"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></div></div> <div class="g02__grid-menu"><ul id="menu-footer-primary-menu" class="g02__menu"><li id="menu-item-965" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-965"><a rel="noopener" tabindex="-1">About us</a> <ul class="sub-menu"><li id="menu-item-966" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-966"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/about-us/">About the OBIE</a></li> <li id="menu-item-1050" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1050"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/contact-us/">Contact us</a></li> <li id="menu-item-1051" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1051"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/faqs/">FAQs</a></li> <li id="menu-item-1052" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1052"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/glossary/">Glossary of open banking terms</a></li> <li id="menu-item-1053" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1053"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/what-is-open-banking/">What is open banking?</a></li></ul></li> <li id="menu-item-1054" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1054"><a tabindex="-1">Open Banking in Action</a> <ul class="sub-menu"><li id="menu-item-1055" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1055"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/regulated-providers/">Find a regulated provider</a></li> <li id="menu-item-1056" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1056"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/app-store/">App store</a></li> <li id="menu-item-1057" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1057"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/api-performance/">API performance</a></li></ul></li> <li id="menu-item-1058" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1058"><a tabindex="-1">Participants</a> <ul class="sub-menu"><li id="menu-item-1059" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1059"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/account-providers/">Account providers (ASPSPs)</a></li> <li id="menu-item-1060" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1060"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/fintechs/">Fintechs (TPPs)</a></li> <li id="menu-item-1061" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1061"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/technical-service-providers">Technical service providers (TSPs)</a></li> <li id="menu-item-1062" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1062"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/regulatory/">Regulatory</a></li></ul></li> <li id="menu-item-1064" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1064"><a tabindex="-1">Resources</a> <ul class="sub-menu"><li id="menu-item-1065" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1065"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/news/">News and press releases</a></li> <li id="menu-item-1066" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1066"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/insights/">Insights</a></li> <li id="menu-item-1067" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1067"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/events/">Open banking events</a></li> <li id="menu-item-1068" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1068"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/media-kit/">Media kit</a></li> <li id="menu-item-1069" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1069"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/glossary/">Glossary</a></li> <li id="menu-item-1070" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1070"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/documents/">Document library</a></li></ul></li> <li id="menu-item-1071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1071"><a tabindex="-1">Solutions</a> <ul class="sub-menu"><li id="menu-item-1072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1072"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/directory/">Directory</a></li> <li id="menu-item-1073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1073"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/dispute-management-system/">Dispute Management System (DMS)</a></li> <li id="menu-item-1074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1074"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/cyber-security-and-counter-fraud/">Security and counter fraud</a></li> <li id="menu-item-1075" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1075"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/confirmation-of-payee/">Confirmation of Payee (CoP)</a></li></ul></li> <li id="menu-item-1076" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1076"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/contact-us/">Contact Us</a> <ul class="sub-menu"><li id="menu-item-1077" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1077"><a target="_blank" rel="noopener" href="https://directory.openbanking.org.uk/s/login/">Directory enrolment</a></li> <li id="menu-item-1078" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1078"><a target="_blank" rel="noopener" href="https://directory.openbanking.org.uk/opendata/reg_apiproviderregistration">Open data API provider enrolment</a></li></ul></li></ul> <ul id="menu-footer-secondary-menu" class="g02__footer-menu"><li id="menu-item-967" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-967"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/terms-conditions/">Terms &amp; Conditions</a></li> <li id="menu-item-1079" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1079"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/privacy-policy/">Privacy Policy</a></li> <li id="menu-item-1080" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1080"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/cookie-policy/">Cookies</a></li> <li id="menu-item-1081" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1081"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/accessibility/">Accessibility</a></li> <li id="menu-item-1082" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1082"><a target="_blank" rel="noopener" href="https://www.openbanking.org.uk/open-licence/">Open licence</a></li></ul></div></div></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/knowledge-base-pub/assets/js/app.c91854fd.js" defer></script><script src="/knowledge-base-pub/assets/js/2.c4d95c86.js" defer></script><script src="/knowledge-base-pub/assets/js/17.dde35632.js" defer></script>
  </body>
</html>
